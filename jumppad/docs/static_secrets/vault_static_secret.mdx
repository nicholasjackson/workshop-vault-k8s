# Creating a VaultStaticSecret

Now that authentication is configured, we can create a `VaultStaticSecret` to sync our demo secret from Vault to Kubernetes.

## VaultStaticSecret Resource

```yaml
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: demo-secret
  namespace: default
spec:
  vaultAuthRef: demo-auth
  mount: secret
  path: demo/config
  type: kv-v2
  refreshAfter: 30s
  destination:
    name: demo-app-secret
    create: true
```

Key fields:
- **vaultAuthRef** - References our VaultAuth resource
- **mount** - The secrets engine mount path (`secret`)
- **path** - Path to the secret within the mount (`demo/config`)
- **type** - KV engine version (`kv-v2`)
- **refreshAfter** - How often to check for updates
- **destination.name** - Name of the Kubernetes secret to create

## Apply the Configuration

```bash
kubectl apply -f k8s/vault-static-secret.yaml
```

## Verify the Secret

Check that the Kubernetes secret was created:

```bash
kubectl get secret demo-app-secret
```

View the secret contents:

```bash
kubectl get secret demo-app-secret -o jsonpath='{.data}' | jq -r 'to_entries[] | "\(.key): \(.value | @base64d)"'
```

## Update the Secret in Vault

Try updating the secret in Vault:

```bash
vault kv put secret/demo/config \
  username="new-user" \
  password="new-password" \
  api_key="new-api-key"
```

Wait 30 seconds (the `refreshAfter` interval) and check the Kubernetes secret again - it should be updated!
